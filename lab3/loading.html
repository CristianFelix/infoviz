<html>
    <head></head>
    <body></body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
    <script>
        d3.csv("data.csv", function(result){
            dataloaded(result);
        })
        
        function dataloaded(result){
            var data = result.map(function(d){
                return {
                    name: d.Country,
                    GDP: +d['GDP per Capita'].replace("$", "").replace(",", ""),
                    Year: new Date(d.Year).getYear() + 1900
                }
            })
            data = data.filter(function(d) {
                return d.Year == 2012;
            })
            
            data.sort(function(a,b){
                return d3.ascending(a.name, b.name);
            });
            console.log(data);
        }
    </script>
</html>










